pluginManagement {
    def props = new java.util.Properties()
    file('gradle.properties').withInputStream { props.load(it) }

    def useStubLoomSource = [
        System.getProperty('useStubLoom'),
        gradle.startParameter.projectProperties.get('useStubLoom'),
        System.getenv('USE_STUB_LOOM'),
        props.getProperty('useStubLoom')
    ].find { it != null }

    boolean useStubLoom = Boolean.parseBoolean(useStubLoomSource ?: 'false')

    if (useStubLoom) {
        includeBuild 'build-logic'
    }

    repositories {
        maven { name = 'Fabric'; url = 'https://maven.fabricmc.net/' }
        gradlePluginPortal()
        mavenCentral()
    }

    if (!useStubLoom) {
        plugins {
            id 'fabric-loom' version props.getProperty('loom_version')
        }
    }
}

rootProject.name = 'SmartMoving-Fabric'
include 'stubs'
